#!/bin/bash

# List of Pokémon to retrieve
POKEMON_LIST=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")

# Base URL for the Pokémon API
BASE_URL="https://pokeapi.co/api/v2/pokemon"

# Delay in seconds between requests to handle rate-limiting
DELAY=2

# Loop through each Pokémon in the list
for pokemon in "${POKEMON_LIST[@]}"; do
    # Output filename
    OUTPUT_FILE="${pokemon}.json"

    # Make the API request
    echo "Fetching data for $pokemon..."
    response=$(curl -s -w "%{http_code}" -o "$OUTPUT_FILE" "$BASE_URL/$pokemon")

    # Check if the request was successful (HTTP 200)
    if [[ $response -ne 200 ]]; then
        echo "Failed to fetch data for $pokemon. HTTP status code: $response" >> errors.txt
        # Remove incomplete or empty file
        rm -f "$OUTPUT_FILE"
    else
        echo "Data for $pokemon saved to $OUTPUT_FILE."
    fi

    # Delay before the next request
    sleep $DELAY
done

echo "Batch Pokémon data retrieval complete."
